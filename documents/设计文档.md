# 名单系统设计文档

##  背景

> 为了构建一个通用的名单系统，提供一个基础名单库能力。

## 数据结构

### 命名空间

| 字段名      | 字段类型 | 说明         |
| ----------- | -------- | ------------ |
| id          | string   |              |
| code        | string   | 命名空间编码 |
| description | string   | 描述         |

> 命名空间主要是用来隔离不同业务的数据，名单类型和名单项都是在命名空间之下

### 名单类型

| 字段名      | 字段类型     | 说明                     |
| ----------- | ------------ | ------------------------ |
| id          | string       |                          |
| code        | string       | 名单类型编码             |
| fields      | list[string] | 这类名单的值被构建的字段 |
| is_valid    | bool         | 是否生效                 |
| description | string       | 描述                     |

### 名单项

| 字段名      | 字段类型   | 说明                                                         |
| ----------- | ---------- | ------------------------------------------------------------ |
| id          | string     |                                                              |
| namespace   | string     | 命名空间                                                     |
| code        | string     | 名单类型编码，用来和名单类型做关联使用                       |
| value       | string     | 名单项的值                                                   |
| multi_value | array[map] | 多项值列表，如果名单是由多个字段构成的，可一一罗列出每个字段的值，如：`[{"key":"field1","value":"value1"},{"key":"field2","value":"value2"}]` |
| is_valid    | bool       | 是否生效                                                     |
| extra       | map        | 可自定义的结构                                               |

> 名单项和名单类型是多对一的关系，既一个名单类型对应多个名单项

## 数据隔离

1. 不同的业务线直接各自部署一套名单系统
2. 通过命名空间来隔离数据，但是命名空间建议隔离的是同一业务线下不同的产品
